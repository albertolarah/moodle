define(["jquery","core/str","core/notification","core/ajax","core/templates"],function(a,b,c,d,e){var f=function(f,g){b.get_strings([{key:"delete"},{key:"confirmdelete",component:"core_cfield"},{key:"yes"},{key:"no"}]).done(function(b){c.confirm(b[0],b[1],b[2],b[3],function(){var b=d.call([{methodname:"core_cfield_delete_entry",args:{id:f}},{methodname:"core_cfield_reload_template",args:{handler:g}}]);b[1].done(function(b){e.render("core_cfield/cfield",b).done(function(b,c){a('[data-region="list-page"]').replaceWith(b),e.runTemplateJS(c)}).fail(function(){})}).fail(function(){})})}).fail(c.exception)},g=function(f,g){b.get_strings([{key:"delete"},{key:"confirmdeletecategory",component:"core_cfield"},{key:"yes"},{key:"no"}]).done(function(b){c.confirm(b[0],b[1],b[2],b[3],function(){var b=d.call([{methodname:"core_cfield_delete_category",args:{id:f}},{methodname:"core_cfield_reload_template",args:{handler:g}}]);b[1].done(function(b){e.render("core_cfield/cfield",b).done(function(b,c){a('[data-region="list-page"]').replaceWith(b),e.runTemplateJS(c)}).fail(function(){})}).fail(function(){})})}).fail(c.exception)},h=function(b,c){var f=d.call([{methodname:"core_cfield_move_up_field",args:{id:b}},{methodname:"core_cfield_reload_template",args:{handler:c}}]);f[1].done(function(b){e.render("core_cfield/cfield",b).done(function(b,c){a('[data-region="list-page"]').replaceWith(b),e.runTemplateJS(c)}).fail(function(){})}).fail(function(){})},i=function(b,c){var f=d.call([{methodname:"core_cfield_move_down_field",args:{id:b}},{methodname:"core_cfield_reload_template",args:{handler:c}}]);f[1].done(function(b){e.render("core_cfield/cfield",b).done(function(b,c){a('[data-region="list-page"]').replaceWith(b),e.runTemplateJS(c)}).fail(function(){})}).fail(function(){})};return{init:function(){a(".confirm_delete").on("click",function(b){var c=a("#cfield_catlist").attr("data-handler");f(a(this).attr("data-id"),c),b.preventDefault()}),a(".confirm_delete_category").on("click",function(b){var c=a("#cfield_catlist").attr("data-handler");g(a(this).attr("data-id"),c),b.preventDefault()}),a(".move_up_field").on("click",function(b){var c=a("#cfield_catlist").attr("data-handler");h(a(this).attr("data-id"),c),b.preventDefault()}),a(".move_down_field").on("click",function(b){var c=a("#cfield_catlist").attr("data-handler");i(a(this).attr("data-id"),c),b.preventDefault()})}}});