define(["jquery","core/str","core/notification","core/ajax","core/templates"],function(a,b,c,d,e){var f=function(f,g,h,i,j){b.get_strings([{key:"delete"},{key:"confirmdelete",component:"core_customfield"},{key:"yes"},{key:"no"}]).done(function(b){c.confirm(b[0],b[1],b[2],b[3],function(){switch(g){case"field":var b="core_customfield_delete_entry";break;case"category":var b="core_customfield_delete_category"}var c=d.call([{methodname:b,args:{id:f}},{methodname:"core_customfield_reload_template",args:{component:h,area:i,itemid:j}}]);c[1].done(function(b){e.render("core_customfield/customfield",b).done(function(b,c){a('[data-region="list-page"]').replaceWith(b),e.runTemplateJS(c)}).fail(function(){})}).fail(function(){})})}).fail(c.exception)},g=function(b,c,f){switch(f){case"category_up":var g="core_customfield_move_up_category";break;case"category_down":var g="core_customfield_move_down_category";break;case"field_up":var g="core_customfield_move_up_field";break;case"field_down":var g="core_customfield_move_down_field"}var h=d.call([{methodname:g,args:{id:b,handler:c}},{methodname:"core_customfield_reload_template",args:{handler:c}}]);h[1].done(function(b){e.render("core_customfield/customfield",b).done(function(b,c){a('[data-region="list-page"]').replaceWith(b),e.runTemplateJS(c)}).fail(function(){})}).fail(function(){})};return{init:function(){var b=a("#customfield_catlist").attr("data-component"),c=a("#customfield_catlist").attr("data-area"),d=a("#customfield_catlist").attr("data-itemid");a(".confirm_delete").on("click",function(e){f(a(this).attr("data-id"),"field",b,c,d),e.preventDefault()}),a(".confirm_delete_category").on("click",function(e){f(a(this).attr("data-id"),"category",b,c,d),e.preventDefault()}),a(".move_up_field").on("click",function(b){var c=a("#customfield_catlist").attr("data-handler");g(a(this).attr("data-id"),c,"field_up"),b.preventDefault()}),a(".move_down_field").on("click",function(b){var c=a("#customfield_catlist").attr("data-handler");g(a(this).attr("data-id"),c,"field_down"),b.preventDefault()}),a(".move_up_category").on("click",function(b){var c=a("#customfield_catlist").attr("data-handler");g(a(this).attr("data-id"),c,"category_up"),b.preventDefault()}),a(".move_down_category").on("click",function(b){var c=a("#customfield_catlist").attr("data-handler");g(a(this).attr("data-id"),c,"category_down"),b.preventDefault()})}}});